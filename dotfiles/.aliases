# Enable aliases to be sudo’ed
alias sudo='sudo '

# Common git aliases
# A number of aliases already exist from oh-my-zsh,
# but these are specific to my workflow
alias gs="git status -s"
alias gds="git diff --staged"
alias gc="git ci -m"
alias gca="git ci -am"


# Disable default oh-my-zsh ls behaviour
unalias ls
unalias l

# Coloured ls
if ls --color > /dev/null 2>&1; then # GNU `ls`
  colorflag="--color"
else # OS X `ls`
  colorflag="-G"
fi

alias ls="ls ${colorflag}"
alias l="ls -Alh ${colorflag}"

# Cleanup scripts
alias dsclean="find . -type f -name '*.DS_Store' -ls -delete"
alias pycclean="find . -type f -name '*.pyc' -delete"
alias origclean="find . -type f -name '*.orig' -delete"
alias cleanup="dsclean && pycclean && origclean"

# Empty the Trash on all mounted volumes and the main HDD
# Also, clear Apple’s System Logs to improve shell startup speed
alias emptytrash="sudo rm -rfv /Volumes/*/.Trashes; sudo rm -rfv ~/.Trash; sudo rm -rfv /private/var/log/asl/*.asl"

# Show/hide hidden files in Finder
alias show="defaults write com.apple.finder AppleShowAllFiles -bool true && killall Finder"
alias hide="defaults write com.apple.finder AppleShowAllFiles -bool false && killall Finder"

# Clear shell history
alias clearhistory='cat /dev/null > ~/.histfile > ~/.psql_history > ~/.sh_history > ~/.bash_history'

# Fix problems that prevent sound output from
# switching properly
alias fixairplay="pkill coreaudiod sbin"

# node.js: List npm modules without dependencies
npm_ls() {
  npm ls "$@" | grep "^[└├]" | sed "s/─┬/──/g"
}

# Atom: List only user-installed packages
apm_ls() {
  apm list --installed --bare | grep '^[^@]\+' -o
}

# Django-specific aliases
rs() {
  ./manage.py runserver 0.0.0.0:${1:-8000}
}

alias mp='./manage.py '
alias ds="./manage.py shell_plus 2> /dev/null || ./manage.py shell"
alias dbs="./manage.py dbshell"

dj_startproject() {
  django-admin startapp --template=https://github.com/jswinarton/django_template/archive/master.zip $@
}

venv() {
  source $1/bin/activate
}

alias mux="tmux a || tmux new -s 'default'"

pq() {
  pgcli $@ 2> /dev/null || psql postgres $@
}

alias pserve="python -m SimpleHTTPServer 8088"

alias mkdir="mkdir -p"

alias b='bundle'
alias be='bundle exec'

alias ag='ag --path-to-agignore ~/.agignore'
